<ion-content [fullscreen]="true">
  <div class="p-3 text-uppercase bg-white text-dark" *ngIf="teacherData.display_name">{{teacherData?.display_name}}</div>
  <!-- <div *ngIf="isScannig && !platform.is('capacitor')"> -->
    <qr-scanner
    #qrScanner
    [debug]="false"
    [canvasHeight]="300"
    [canvasWidth]="300"
    *ngIf="isScannig"
    ></qr-scanner>
  <!-- </div> -->
  <div class="content-container" *ngIf="!isScannig">
    <div class="student-details" *ngIf="!!studentData">
      <div class="profile-image-container">
        <img
          [src]="studentData.profile_image"
          class="img-thumbnail st-image mt-2"
          height="200"
          width="100"
          alt=""
        />
      </div>
      <div id="details">
        <div class="form-group mb-4 mt-4">
          <div class="fields">
            <input
              type="text"
              #nameInput
              [(ngModel)]="studentData.display_name"
              placeholder="Name"
            />
            <label>Name</label>
          </div>
        </div>
        <div class="form-group mb-4">
          <div class="fields">
            <input type="text" [value]="getAge" #nameInput placeholder="Age" />
            <label>Age</label>
          </div>
        </div>
        <div class="form-group mb-4">
          <div class="fields">
            <input type="text" #nameInput placeholder="Present Days" />
            <label>Present Days</label>
          </div>
        </div>
        <div class="form-group mb-4">
          <div class="fields">
            <input
              type="text"
              [(ngModel)]="studentData.mobile"
              placeholder="Contact No"
            />
            <label>Contact No</label>
          </div>
        </div>
        <div class="form-group mb-4">
          <div class="fields">
            <input type="text" #nameInput placeholder="Points" />
            <label>Points</label>
          </div>
        </div>
      </div>
    </div>
    <div class="attendence-details" *ngIf="!!studentData">
      <ng-container *ngFor="let at of attendence">
        <div class="at-box mx-1" [ngClass]="{'present': at.is_present, 'absent': !at.is_present}">
          <span class="d-block">{{at.date}} </span>
          <span class="d-block">{{at.month}}</span>
        </div>
      </ng-container>
    </div>
  
    <div class="progress-details" *ngIf="!!userGathaDetails">
      <div class="gatha-details">
        <div class="form-group mb-4 mt-4">
          <div class="fields">
            <input
              type="text"
              placeholder="Sutra"
              [value]="userGathaDetails.Sutra.name"
            />
            <label>Sutra</label>
          </div>
        </div>
        <div class="form-group mb-4 mt-4">
          <div class="fields">
            <input
              type="text"
              placeholder="Gatha"
              value="{{userGathaDetails.current_gatha_count}} / {{userGathaDetails.Sutra.gatha_count}}"
            />
            <label>Gatha</label>
          </div>
        </div>
        <div class="form-group mb-4 mt-4">
          <div class="fields">
            <input
              type="text"
              placeholder="Started on"
              value="{{userGathaDetails.createdAt | date:'d MMMM'}}"
            />
            <label>Started on</label>
          </div>
        </div>
      </div>
      <div class="days-till-now">
        <div class="dtn-box" [innerHTML]="getCurrentDayOfGatha"></div>
      </div>
      <div class="action-buttons">
        <!-- <div> -->
          <ion-button class="continue" *ngIf="userGathaDetails.current_gatha_count < userGathaDetails.Sutra.gatha_count" (click)="getNextGatha()">Continue</ion-button>
          <ion-button class="finish" *ngIf="userGathaDetails.current_gatha_count == userGathaDetails.Sutra.gatha_count" (click)="getNextGatha()">Finish</ion-button>
          <ion-button class="details">Details</ion-button>
        <!-- </div> -->
      </div>
    </div>

    <div class="next-action">
      <ion-button class="new-scan" (click)="newScan()">New Scan</ion-button>
      <ion-button class="back-to-home" (click)="backToHome()">Back To Home</ion-button>
    </div>
  </div>

</ion-content>
